<!DOCTYPE html>
<html lang="hi-IN">
<head>
<meta charset="UTF-8">
<title>Kalyani Devi School of Education</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Kalyani Devi School of Education, Lormi ‚Äì Quality education with values & discipline.">
<meta name="keywords" content="Kalyani Devi School, Lormi school, CGSE school, Chhattisgarh">
<meta name="theme-color" content="#0b4d91">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">

<style>
/* ================= RESET & BASE ================= */
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Poppins','Segoe UI',sans-serif;background:#f5f7fa;color:#333;line-height:1.6;}
a{text-decoration:none;color:inherit;}
img{max-width:100%;display:block;height:auto;}

/* ================= HEADER ================= */
header{
  position:sticky; top:0; z-index:6000;
  background:#0b4d91; color:#fff;
  display:flex; justify-content:center; align-items:center; gap:14px;
  padding:14px 20px; transition:all 0.35s ease;
}
.school-title{display:flex; align-items:center; gap:14px;}
.logo-short{display:flex; align-items:center; gap:8px;}
.logo-short img{height:72px; transition:all 0.35s ease;}
.short-name{display:none; font-weight:700; font-size:20px;}
.full-name{font-weight:700; font-size:26px; white-space:nowrap; transition:all 0.35s ease;}
header.shrink .logo-short img{height:40px;}
header.shrink .full-name{font-size:13px;}
.menu-toggle{display:none; font-size:28px; cursor:pointer; position:absolute; right:15px;}

/* ===== MOBILE HEADER ===== */
@media(max-width:768px){
  header{flex-direction:column; align-items:center; padding:12px 10px;}
  .school-title{flex-direction:column; align-items:center; text-align:center;}
  .logo-short{justify-content:center;}
  .logo-short img{height:48px;}
  .short-name{display:inline-block; font-size:18px;}
  .full-name{font-size:14px; white-space:normal; line-height:1.3; margin-top:4px;}
  header.shrink .logo-short img{height:36px;}
  header.shrink .full-name{font-size:12px;}
  .menu-toggle{display:block;}
}

/* ================= NAV ================= */
nav{background:#083b70; text-align:center;}
nav a{display:inline-block; color:#fff; font-weight:500; margin:0 10px; padding:10px;}
@media(max-width:768px){
  nav{position:fixed; top:110px; left:0; width:100%; flex-direction:column; display:none; z-index:5000;}
  nav.open{display:flex;}
  nav a{border-bottom:1px solid rgba(255,255,255,0.25);}
  body.menu-open{overflow:hidden;}
}

/* ================= SLIDER ================= */
.slider{position:relative; overflow:hidden; height:420px;}
.slide{display:none; width:100%; height:420px; object-fit:cover;}
.prev,.next{position:absolute; top:50%; transform:translateY(-50%);
  background:rgba(0,0,0,0.5); color:#fff; padding:12px; font-size:24px; border-radius:50%; cursor:pointer;}
.prev{left:15px;} .next{right:15px;}
@media(max-width:768px){.slider, .slide{height:240px;}}

/* ================= MARQUEE ================= */
.marquee{background:#e8f0fe; padding:10px 0; overflow:hidden; white-space:nowrap; position:relative;}
#marqueeTrack{display:inline-block; white-space:nowrap;}
#marqueeTrack a{display:inline-block; font-weight:bold; color:#0b4d91; margin-right:60px; text-decoration:none;}
#marqueeTrack a:hover{color:#b30000;}
@keyframes scrollNotices {0%{transform:translateX(100%);}100%{transform:translateX(-100%);}}
#marqueeTrack.scrolling{animation:scrollNotices 25s linear infinite; animation-play-state:running;}
.marquee:hover #marqueeTrack.scrolling,
.marquee:active #marqueeTrack.scrolling{animation-play-state:paused;}
@media(max-width:768px){#marqueeTrack a{margin-right:30px; font-size:14px;}}

/* ================= SECTIONS ================= */
section{padding:30px 20px; max-width:1100px; margin:auto;}
h2{color:#0b4d91; margin-bottom:20px; border-bottom:2px solid #ddd; padding-bottom:6px;}

/* ================= ABOUT ================= */
.about-box{background: linear-gradient(135deg,#e8f0fe,#fff); border-left:6px solid #0b4d91; border-radius:14px; padding:35px 25px; box-shadow:0 6px 18px rgba(0,0,0,0.08);}
.about-box p{margin-bottom:15px;}
.slogan{text-align:center;font-weight:700;color:#0b4d91;margin:15px 0 25px; font-size:18px;}

/* ================= ACADEMICS ================= */
#academics a, #academics a{display:inline-block; margin-top:15px; background:red; color:#fff; padding:10px 18px; border-radius:8px; font-weight:600; box-shadow:0 3px 10px rgba(0,0,0,0.2); transition:0.3s;}
#academics a:hover, #academics a:hover{background:#b30000;}

/* ================= GRID & CARDS ================= */
.grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:15px;}
.card{background:#fff; padding:12px; text-align:center; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.1); transition:transform 0.35s ease, box-shadow 0.35s ease;}
.card:hover{transform:translateY(-8px) scale(1.02); box-shadow:0 14px 30px rgba(0,0,0,0.18);}
.card img{width:90px; height:90px; object-fit:cover; border-radius:50%; margin-bottom:8px;}
.view-btn{margin-top:8px; padding:8px 18px; background:#0b4d91; color:#fff; border:none; border-radius:20px; cursor:pointer;}
.view-btn:hover{background:#083b70;}
.director-card{border:3px solid gold; background:linear-gradient(180deg,#fffbea,#ffffff);}

/* ================= POPUP ================= */
.popup{position:fixed; inset:0; background:rgba(0,0,0,0.6); display:none; justify-content:center; align-items:center; z-index:9999;}
.popup-box{background:#fff; width:90%; max-width:420px; padding:25px; border-radius:16px; text-align:center; animation:popIn 0.4s ease; position:relative;}
.popup-box img{width:130px; height:130px; object-fit:cover; border-radius:50%; margin-bottom:15px;}
.popup .close{position:absolute; top:12px; right:15px; font-size:22px; cursor:pointer;}
.popup.director .popup-box{border:4px solid gold; background:linear-gradient(180deg,#fff9e6,#fff);}
@keyframes popIn{from{transform:scale(0.7);opacity:0} to{transform:scale(1);opacity:1;}}
.popup-actions a{display:inline-block;margin:6px 8px;background:#0b4d91;color:#fff;font-weight:600;padding:10px 18px;border-radius:8px;text-decoration:none;transition:0.3s;}
.popup-actions a:hover{background:#083b70;}

/* ================= GALLERY SLIDER ================= */
.gallery-slider{position:relative; overflow:hidden; border-radius:14px;}
.gallery-wrapper{overflow:hidden;}
.gallery-track{display:flex; transition:transform 0.5s ease; width:100%;}
.gallery-slide{min-width:100%;}
.gallery-slide img{width:100%; height:280px; object-fit:cover;}
.gallery-slider .prev, .gallery-slider .next{
  position:absolute; top:50%; transform:translateY(-50%);
  background:rgba(0,0,0,0.5); color:#fff; padding:12px; font-size:22px; border-radius:50%; cursor:pointer; z-index:10;
}
.gallery-slider .prev{left:10px;}
.gallery-slider .next{right:10px;}

/* ================= SPORTS ================= */
.sports-slider{position:relative; height:260px; overflow:hidden; border-radius:14px;}
.sport-slide{position:absolute; top:0; left:0; width:100%; height:260px; object-fit:cover; opacity:0; transition:opacity 1s ease;}
.sport-slide.active{opacity:1; z-index:1;}
.sports-slider .prev,.sports-slider .next{position:absolute; top:50%; transform:translateY(-50%); background:rgba(0,0,0,0.5); color:#fff; padding:12px; font-size:22px; border-radius:50%; cursor:pointer;}
.sports-slider .prev{left:10px;} .sports-slider .next{right:10px;}

/* ================= CONTACT ================= */
#contact a{display:inline-block; margin-top:5px; color:#fff; text-decoration:none;}
#contact a.call-btn{background:#28a745;padding:8px 14px;border-radius:6px;}
#contact a.map-btn{background:#0b4d91;padding:8px 14px;border-radius:6px;}

/* ================= WHATSAPP ================= */
.whatsapp{position:fixed; bottom:20px; right:20px; display:flex; align-items:center; gap:10px; background:#25D366; color:#fff; padding:14px 22px; border-radius:50px; font-weight:600; box-shadow:0 6px 15px rgba(0,0,0,0.3); z-index:9999;}
.whatsapp img{width:22px;height:22px;}
.whatsapp:hover{transform:scale(1.06); box-shadow:0 8px 18px rgba(0,0,0,0.4);}

/* ================= FOOTER ================= */
footer{background:#0b4d91; color:#fff; text-align:center; padding:15px; margin-top:20px;}

/* ===== NOTICE STYLES ===== */
.notice-latest{
  background:#fff0f0;
  border-left:5px solid #d90000;
  padding:8px 10px;
  margin-bottom:8px;
  border-radius:6px;
}

.notice-latest a{
  color:#b30000;
  font-weight:600;
}

.notice-year{
  margin-top:18px;
  font-weight:700;
  color:#0b4d91;
}

.new-badge{
  background:red;
  color:#fff;
  font-size:11px;
  padding:2px 6px;
  border-radius:6px;
  margin-left:6px;
  font-weight:700;
}
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="school-title">
    <div class="logo-short">
      <img src="images/logo.png" alt="KDSE Logo">
      <span class="short-name">KDSE</span>
    </div>
    <div class="full-name">KALYANI DEVI SCHOOL OF EDUCATION</div>
  </div>
  <span class="menu-toggle" onclick="toggleMenu()">‚ò∞</span>
</header>

<!-- NAVIGATION -->
<nav id="mainNav">
  <a href="#">Home</a>
  <a href="#about">About</a>
  <a href="#academics">Academics</a>
  <a href="#teachers">Teachers</a>
  <a href="#gallery">Gallery</a>
  <a href="#sports">Sports</a>
  <a href="#results">Results</a>
  <a href="#notice">Notice</a>
  <a href="#contact">Contact</a>
  <a href="directors-desk.html">Director‚Äôs Desk</a>
</nav>

<!-- SLIDER -->
<div class="slider">
<img class="slide" src="images/slider/slide1.jpg">
<img class="slide" src="images/slider/slide2.jpg">
<img class="slide" src="images/slider/slide3.jpg">
<span class="prev" onclick="changeSlide(-1)">‚ùÆ</span>
<span class="next" onclick="changeSlide(1)">‚ùØ</span>
</div>

<!-- MARQUEE -->
<div class="marquee">
  <div id="marqueeTrack">Loading notices...</div>
</div>

<!-- ABOUT -->
<section id="about" class="about-box">
<h2>‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§≤‡§Ø ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç</h2>
<p class="slogan">üåü ‚Äú‡§ú‡•ç‡§û‡§æ‡§® ‚Ä¢ ‡§∏‡§Ç‡§∏‡•ç‡§ï‡§æ‡§∞ ‚Ä¢ ‡§â‡§ú‡•ç‡§ú‡•ç‡§µ‡§≤ ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø‚Äù üåü</p>
<p>‡§ï‡§≤‡•ç‡§Ø‡§æ‡§£‡•Ä ‡§¶‡•á‡§µ‡•Ä ‡§∏‡•ç‡§ï‡•Ç‡§≤ ‡§ë‡§´ ‡§è‡§ú‡•Å‡§ï‡•á‡§∂‡§® ‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§∞‡•ç‡§µ‡§æ‡§Ç‡§ó‡•Ä‡§£ ‡§µ‡§ø‡§ï‡§æ‡§∏ ‡§™‡§∞ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§</p>
<p>‡§Ö‡§®‡•Å‡§≠‡§µ‡•Ä ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï ‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§ï‡•ã ‡§Ü‡§§‡•ç‡§Æ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§î‡§∞ ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§â‡§ú‡•ç‡§ú‡•ç‡§µ‡§≤ ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•Ä ‡§¶‡§ø‡§∂‡§æ ‡§Æ‡•á‡§Ç ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§® ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§</p>
</section>

<!-- ACADEMICS -->
<section id="academics">
<h2>Academics</h2>
<ul>
<li>Pre-Primary</li>
<li>Primary</li>
<li>Secondary</li>
</ul>
<a href="https://docs.google.com/forms/d/e/1FAIpQLScmKeHyExJFw2RWrZ298YawPTNY0PWVLgKj76FBThu1mdVTmw/viewform?usp=dialog" target="_blank">üìù Online Admission Form</a>
</section>

<!-- DIRECTOR MESSAGE -->
<section id="director-message">
<h2>‚úçÔ∏è Message from Founder & Director</h2>
<div class="card">
<p>‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§ï‡•á‡§µ‡§≤ ‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡•ã‡§Ç ‡§§‡§ï ‡§∏‡•Ä‡§Æ‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§®‡•Ä ‡§ö‡§æ‡§π‡§ø‡§è‡•§ ‡§π‡§Æ‡§æ‡§∞‡§æ ‡§â‡§¶‡•ç‡§¶‡•á‡§∂‡•ç‡§Ø ‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡§Ç‡§∏‡•ç‡§ï‡§æ‡§∞, ‡§Ü‡§§‡•ç‡§Æ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§î‡§∞ ‡§ú‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞‡•Ä ‡§ï‡•Ä ‡§≠‡§æ‡§µ‡§®‡§æ ‡§µ‡§ø‡§ï‡§∏‡§ø‡§§ ‡§ï‡§∞‡§®‡§æ ‡§π‡•à‡•§</p>
<p>Kalyani Devi School of Education ‡§Æ‡•á‡§Ç ‡§π‡§Æ ‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§ï‡•ã ‡§Ü‡§ß‡•Å‡§®‡§ø‡§ï ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§ï‡•á ‡§∏‡§æ‡§•-‡§∏‡§æ‡§• ‡§®‡•à‡§§‡§ø‡§ï ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡•ã‡§Ç ‡§∏‡•á ‡§≠‡•Ä ‡§ú‡•ã‡§°‡§º‡§§‡•á ‡§π‡•à‡§Ç‡•§</p>
<p style="margin-top:15px;font-weight:bold;">‚Äî Paras Ram Kashyap, Director</p>
</div>
</section>

<!-- TEACHERS -->
<section id="teachers">
<h2>üë• Our Management & Teachers</h2>
<div class="grid" id="teachersGrid"></div>
</section>

<!-- PROFILE POPUP -->
<div id="profilePopup" class="popup" onclick="closePopup()">
<div class="popup-box" onclick="event.stopPropagation()">
<span class="close" onclick="closePopup()">‚úñ</span>
<img id="popImg" src="">
<h2 id="popName"></h2>
<p id="popRole"></p>
<div class="qualifications" id="popQual"></div>
<div class="popup-actions">
<a id="popCall" href="#">üìû Call</a>
<a id="popWhatsApp" href="#" target="_blank">üí¨ WhatsApp</a>
</div>
</div>
</div>

<!-- GALLERY -->
<section id="gallery">
<h2>Gallery</h2>
<div class="gallery-slider">
  <div class="gallery-wrapper">
    <div class="gallery-track" id="galleryTrack">
      <div class="gallery-slide"><img src="images/gallery1.jpg"></div>
      <div class="gallery-slide"><img src="images/gallery2.jpg"></div>
      <div class="gallery-slide"><img src="images/gallery3.jpg"></div>
    </div>
  </div>
  <span class="prev" onclick="changeGallerySlide(-1)">‚ùÆ</span>
  <span class="next" onclick="changeGallerySlide(1)">‚ùØ</span>
</div>
</section>

<!-- SPORTS -->
<section id="sports">
<h2>Sports & Activities</h2>
<div class="sports-slider">
<span class="prev" onclick="changeSportSlide(-1)">‚ùÆ</span>
<span class="next" onclick="changeSportSlide(1)">‚ùØ</span>
<img class="sport-slide active" src="images/sports1.jpg">
<img class="sport-slide" src="images/sports2.jpg">
<img class="sport-slide" src="images/sports3.jpg">
</div>
</section>

<section id="results">
  <h2>üìÑ Result / Download</h2>

  <!-- Year selection dropdown -->
  <label for="year-select">Select Year:</label>
  <select id="year-select"></select>

  <ul id="results-list"></ul>
</section>

<!-- NOTICE -->
<section id="notice">
<h2>üì¢ Notice Board</h2>

<div id="liveNotice"></div>

<p style="margin-top:10px;">
  <a id="pdfNotice" target="_blank">üìÑ Download Latest Notice</a>
</p>

<label style="font-weight:600;">üîç Filter by Year:</label>
<select id="yearFilter" style="margin-left:8px;padding:6px;border-radius:6px;">
  <option value="all">All</option>
</select>

<div id="noticeArchive"></div>
</section>

<!-- CONTACT -->
<section id="contact">
<h2>Contact Us</h2>
<p>üìç Saraswati Shishu Mandir, Piparkhunta, Lormi, Mungeli, Chhattisgarh ‚Äì 495115</p>
<p>üìû <a class="call-btn" href="tel:+918224821843">Call Now</a></p>
<p>‚úâ kdse1227@gmail.com</p>
<p><a class="map-btn" href="https://www.google.com/maps/dir/?api=1&destination=22.1947379,81.7505496" target="_blank">üìç Get Directions</a></p>
<div style="margin-top:15px;border-radius:10px;overflow:hidden">
<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d4382.045056313084!2d81.7483602!3d22.1947811!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3a28da1c2ce6c70d%3A0x701c0bca0a6c45b6!2sSaraswati%20Shishu%20Mandir%20Lormi!5e0!3m2!1sen!2sin!4v1682934739458!5m2!1sen!2sin" width="100%" height="220" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
</div>
</section>

<!-- WHATSAPP -->
<a href="https://api.whatsapp.com/send?phone=+918224821843&text=Hello%20KDSE" class="whatsapp" target="_blank">
<img src="images/whatsapp.svg" alt="WhatsApp"> WhatsApp
</a>

<!-- FOOTER -->
<footer>
&copy; 2026 Kalyani Devi School of Education. All rights reserved.
</footer>

<script>
// ===== MOBILE MENU =====
function toggleMenu(){
  const nav = document.getElementById('mainNav');
  nav.classList.toggle('open');
  document.body.classList.toggle('menu-open');
}

// ===== AUTO-CLOSE MENU ON LINK CLICK =====
document.querySelectorAll('#mainNav a').forEach(link => {
  link.addEventListener('click', () => {
    const nav = document.getElementById('mainNav');
    if(nav.classList.contains('open')) {
      nav.classList.remove('open');
      document.body.classList.remove('menu-open');
    }
  });
});

// ===== HEADER SHRINK ON SCROLL =====
window.addEventListener('scroll', () => {
  const header = document.querySelector('header');
  if(window.scrollY > 80){ // scroll threshold
    header.classList.add('shrink');
  } else {
    header.classList.remove('shrink');
  }
});

// ===== SLIDER =====
let slideIndex = 0;
const slides = document.querySelectorAll('.slide');
function showSlide(n){
  slides.forEach(s=>s.style.display='none');
  slideIndex = (n+slides.length)%slides.length;
  slides[slideIndex].style.display='block';
}
function changeSlide(n){ showSlide(slideIndex+n); }
showSlide(slideIndex);

// ===== NOTICE SYSTEM WITH YEAR FILTER + DOWNLOAD BUTTON =====
let noticeData = [];

fetch('notice.json')
  .then(res => {
    if(!res.ok) throw new Error("Notice file not found");
    return res.json();
  })
  .then(data => {
    noticeData = data.notices;

    const marqueeTrack = document.getElementById('marqueeTrack');
    const liveNotice = document.getElementById('liveNotice');
    const yearFilter = document.getElementById('yearFilter');
    const pdfNotice = document.getElementById('pdfNotice');

    marqueeTrack.innerHTML = '';
    liveNotice.innerHTML = '';

    const years = new Set();

    noticeData.forEach(n => {
      years.add(n.year);

      // ===== MARQUEE (ONLY latest:true) =====
      if(n.latest){
        const a = document.createElement('a');
        a.href = n.link;
        a.target = "_blank";
        a.textContent = `üì¢ ${n.title} (${formatDate(n.date)})`;
        a.style.marginRight = "40px";   // spacing
        marqueeTrack.appendChild(a);
      }

      // ===== RED HIGHLIGHT SECTION =====
      if(n.latest){
        const div = document.createElement('div');
        div.className = "notice-latest";
        div.innerHTML = `
          üóì ${formatDate(n.date)} ‚Äì
          <a href="${n.link}" target="_blank">${n.title}</a>
          ${n.new === true ? '<span class="new-badge">NEW</span>' : ''}
        `;
        liveNotice.appendChild(div);
      }
    });

    // ===== YEAR DROPDOWN =====
    [...years].sort((a,b)=>b-a).forEach(y=>{
      const opt = document.createElement('option');
      opt.value = y;
      opt.textContent = y;
      yearFilter.appendChild(opt);
    });

    // ===== DOWNLOAD BUTTON (First latest only) =====
    const firstLatest = noticeData.find(n => n.latest);
    if(firstLatest){
      pdfNotice.href = firstLatest.link;
      pdfNotice.innerText = "üìÑ Download Latest Notice";
    } else {
      pdfNotice.style.display = "none";
    }

    renderArchive("all");
    marqueeTrack.classList.add('scrolling');
  })
  .catch(err => {
    const marqueeTrack = document.getElementById('marqueeTrack');
    marqueeTrack.innerText = "‚ö†Ô∏è Notices unavailable";
    console.error(err);
  });


// ===== RENDER ARCHIVE =====
function renderArchive(year){
  const archive = document.getElementById('noticeArchive');
  archive.innerHTML = '';

  const filtered = year === "all"
    ? noticeData
    : noticeData.filter(n => n.year == year);

  const grouped = {};
  filtered.forEach(n => {
    if(!grouped[n.year]) grouped[n.year] = [];
    grouped[n.year].push(n);
  });

  Object.keys(grouped)
    .sort((a,b) => b - a)
    .forEach(y => {
      const h = document.createElement('div');
      h.className = "notice-year";
      h.innerText = "üìÇ Notices " + y;
      archive.appendChild(h);

      grouped[y].forEach(n => {
        const p = document.createElement('p');
        p.innerHTML = `‚Ä¢ ${formatDate(n.date)} ‚Äì
          <a href="${n.link}" target="_blank">${n.title}</a>
          ${n.new === true ? '<span class="new-badge">NEW</span>' : ''}
        `;
        archive.appendChild(p);
      });
    });
}

// ===== FILTER CHANGE =====
document.getElementById('yearFilter').addEventListener('change', function(){
  renderArchive(this.value);
});

// ===== DATE FORMAT =====
function formatDate(d){
  const date = new Date(d);
  return date.toLocaleDateString('hi-IN',{
    day:'2-digit',
    month:'short',
    year:'numeric'
  });
}

// ===== TEACHERS POPUP =====
const teachers = [
  {name:"Paras Ram Kashyap", role:"Director", img:"images/teachers/paras.jpg", qual:"B.Ed, M.Ed", phone:"+918224821843"},
  {name:"Aashish Kumar Kulmitra", role:"Principal", img:"images/teachers/sita.jpg", qual:"M.Ed", phone:"+918224821844"}
];
const teachersGrid = document.getElementById('teachersGrid');
teachers.forEach((t,i)=>{
  let card = document.createElement('div');
  card.className='card'+(t.role==='Director'?' director-card':'');
  card.innerHTML=`<img src="${t.img}"><h3>${t.name}</h3><p>${t.role}</p><button class="view-btn" onclick="showProfile(${i})">View Profile</button>`;
  teachersGrid.appendChild(card);
});
function showProfile(i){
  const t=teachers[i];
  document.getElementById('popImg').src=t.img;
  document.getElementById('popName').innerText=t.name;
  document.getElementById('popRole').innerText=t.role;
  document.getElementById('popQual').innerText=t.qual;
  document.getElementById('popCall').href=`tel:${t.phone}`;
  document.getElementById('popWhatsApp').href=`https://api.whatsapp.com/send?phone=${t.phone.replace('+','')}&text=Hello`;
  document.getElementById('profilePopup').style.display='flex';
}
function closePopup(){ document.getElementById('profilePopup').style.display='none'; }

// ===== GALLERY SLIDER =====
let gIndex=0;
const gTrack=document.getElementById('galleryTrack');
const gSlides=gTrack.children;
function showGallerySlide(n){ gIndex=(n+gSlides.length)%gSlides.length; gTrack.style.transform=`translateX(${-gIndex*100}%)`; }
function changeGallerySlide(n){ showGallerySlide(gIndex+n); }
showGallerySlide(gIndex);

// ===== SPORTS SLIDER =====
let sIndex=0;
const sSlides=document.querySelectorAll('.sport-slide');
function showSportSlide(n){
  sSlides.forEach(s=>s.classList.remove('active'));
  sIndex=(n+sSlides.length)%sSlides.length;
  sSlides[sIndex].classList.add('active');
}
function changeSportSlide(n){ showSportSlide(sIndex+n); }
showSportSlide(sIndex);

// ===== RESULTS DROPDOWN & PDF LINKS =====
const resultsFiles = [
  { class: 'Class 10', file: 'class10-result.pdf' },
  { class: 'Class 12', file: 'class12-result.pdf' }
];

const yearSelect = document.getElementById('year-select');
const resultsList = document.getElementById('results-list');

// Fetch years from JSON
fetch('results/years.json')
  .then(res => {
    if (!res.ok) throw new Error('Years file not found');
    return res.json();
  })
  .then(years => {
    // Populate dropdown
    years.forEach(year => {
      const option = document.createElement('option');
      option.value = year;
      option.textContent = year;
      yearSelect.appendChild(option);
    });

    // Set default year
    const currentYear = new Date().getFullYear().toString();
    yearSelect.value = years.includes(currentYear) ? currentYear : years[0];

    // Render initial results
    renderResults(yearSelect.value);

    // Change results on year change
    yearSelect.addEventListener('change', e => {
      renderResults(e.target.value);
    });
  })
  .catch(err => {
    resultsList.innerHTML = "<li>PDF not available</li>";
    console.error(err);
  });

// Render results function
function renderResults(year) {
  resultsList.innerHTML = '';
  resultsFiles.forEach(r => {
    const li = document.createElement('li');
    const a = document.createElement('a');
    a.href = `results/${year}/${r.file}`;
    a.target = "_blank";
    a.textContent = `${r.class} Result`;
    li.appendChild(a);
    resultsList.appendChild(li);
  });
}
</script>
</body>
</html>
